################################################################################
##
## HeLx Application Registry
##  
##   The registry consolidates metadata links to application specifications.
##   The registry's main components are:
##     * Metadata about the registry itself
##     * Repositories describing sources of application metadata.
##     * Sub-Registries providing contexts for sets of applications.
##
##   Each application has an identifier, name, description, and a link to its 
##   specification. Applications may currently be specified in the 
##   docker-compose format though we also expect to broaden the scope of 
##   apps to include launching websites and other methods.
##
##   When a platform launches an application, it needs to know what endpoints
##   to present upstream. Apps can also specify a map of service names to port
##   numbers. The service and port name must match the name of a container
##   in the docker-compose specification and its exposed port respectively.
##
##   Contexts implement a simple form of inheritance. Each context may speicify
##   a list of contexts it extends. Apps from extended contexts will be added
##   to the extending context's apps.
##
##   This is alpha. Expect significant changes to modularity, inheritance,
##   and naming coming soon.
##
################################################################################
api: Tycho
version: 0.0.1
metadata:
  id: helx-app-registry
  name: HeLx Application Registry
  author: HeLx Dev
  description: An alpha metadata registry for HeLx applications.
repositories:
  catalyst_apps:
    description: Main repository for Catalyst Apps and Tools
    # This is a link to a fork of the Dockstore GitHub repo.
    # Perhaps a more interesting direction might be to make a GA4GH TRS endpoint the repo.
    url: https://github.com/helxplatform/app-support-prototype/raw/develop/dockstore-yaml-proposals
contexts:
  common:
    name: HeLx Common App Registry
    apps:
      cloudtop:
        name: CloudTop
        # The naming convention ${repo]/${context_id}/docker-compose.yaml means we can elide this feature.
        # The same goes for icon. It's not needed unless it's custom.
        # Similarly, we generate ${repo]/${context_id}/.env as the compose settings.
        spec: ${catalyst_apps}/cloudtop/docker-compose.yaml
        icon: ${catalyst_apps}/cloudtop/icon.png
        descripton: CloudTop is a cloud native, browser accessible Linux desktop.
        docs: https://helxplatform.github.io/cloudtop-docs/
        services:
          cloudtop : 8080
      jupyter-datascience:
        name: Jupyter Data Science
        spec: ${catalyst_apps}/jupyter-ds/docker-compose.yaml
        icon: ${catalyst_apps}/jupyter-ds/icon.png
        descripton: A Jupyter data science notebook.
        docs: https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html#jupyter-datascience-notebook
        services:
          jupyter-datascience : 8888
      rstudio-server:
        name: R Studio Server
        spec: ${catalyst_apps}/rstudio-server/docker-compose.yaml
        icon: ${catalyst_apps}/rstudio-server/icon.png
        descripton: R Studio Server is a web based notebook environment for R development.
        docs: https://rstudio.com/products/rstudio/
        services:
          rstudio-server : 8787
  braini:
    extends:
      - common
    name: BRAIN-I App Registry
    apps:
      imagej:
        name: ImageJ Viewer
        spec: ${catalyst_apps}/imagej/docker-compose.yaml
        icon: ${catalyst_apps}/imagej/icon.png
        descripton: ImageJ is a public domain Java image processing program inspired by NIH Image for the Macintosh.
        docs: https://imagej.nih.gov/ij/
        services:
          imagej: 8080
      # TODO: separate napari and imagej, updating these appropriately.
      napari:
        name: Napari Image Viewer
        spec: ${catalyst_apps}/imagej/docker-compose.yaml
        icon: ${catalyst_apps}/imagej/icon.png
        descripton: >
          Napari is a fast, interactive, multi-dimensional image viewer for browsing,
          annotating, and analyzing large multi-dimensional images.
        docs: https://napari.org/
        services:
          napari : 8080            
  catalyst:
    extends:
      - common
    name: BioData Catalyst App Registry
    apps:
      dicom-viewer:
        name: DICOM Viewer
        spec: ${catalyst_apps}/dicom-cloudtop/docker-compose.yaml
        icon: ${catalyst_apps}/dicom-cloudtop/icon.png
        descripton: ___________________________________________________
        # TODO: Dicom specific docs
        docs: https://helxplatform.github.io/cloudtop-docs/
        services:
          cloudtop : 8080
      # TODO: is this just jupyter-ds with access to autoencoder python modules? If so, delete.
      autoencoder-notebook:
        name: Autoencoder Notebook
        spec: ${catalyst_apps}/helx-autoencoder/docker-compose.yaml
        icon: ${catalyst_apps}/helx-autoencoder/icon.png
        descripton: ___________________________________________________
        docs: http://we.need.autoencoder.docs/doc.html # TODO: need these
        services:
          jupyter : 8888          
      hail:
        name: Hail / Jupyter Workspace
        spec: ${catalyst_apps}/hail/docker-compose.yaml
        icon: ${catalyst_apps}/hail/icon.png
        description: A notebook computing interface to a large single node Hail genomics workspace.
        docs: https://github.com/helxplatform/helx-hail # TODO: Better docs.
        services:
          jupyter : 8888
  scidas:
    extends:
      - common
    name: SciDAS App Registry
    apps:
      nextflow-api:
        name: Nextflow API
        spec: ${catalyst_apps}/nextflow/docker-compose.yaml
        icon: ${catalyst_apps}/nextflow/icon.png
        descripton: A cloud native workspace for executing Nextflow workflows.
        docs: https://github.com/SciDAS/nextflow-api
        services:
          nextflow : 8080
      gsforge:
        name: GSForge
        spec: ${catalyst_apps}/gsforge/docker-compose.yaml
        icon: ${catalyst_apps}/gsforge/icon.png
        descripton: >
          GSForge is a Python package that assists researchers in the selection of gene sets with
          potential association to an experimental condition or phenotypic trait, which offers new
          potential hypotheses for gene-trait causality.
        docs: https://systemsgenetics.github.io/GSForge/
        services:
          jupyter : 8888
  blackbalsam:
    extends:
      - common
    name: RENCI Blackbalsam Registry
    apps:
      blackbalsam:
        name: Blackbalsam
        spec: ${catalyst_apps}/blackbalsam/docker-compose.yaml
        icon: ${catalyst_apps}/blackbalsam/icon.png
        descripton: Blackbalsam is a notebook AI, visualization, and parallel computing environment.
        docs: https://github.com/stevencox/blackbalsam
        services:
          jupyter : 8888
                
